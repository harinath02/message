<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Magic For You</title>
    <style>
        :root {
            --pink: #ffb7c5;
            --glow: #ff85a2;
            --deep: #ff2d75;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; touch-action: none; }

        body, html {
            height: 100%; width: 100%;
            overflow: hidden;
            font-family: 'Georgia', serif;
            background: #05050a;
            color: white;
        }

        #magicCanvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        .scene {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            z-index: 10;
            padding: 20px;
            pointer-events: none;
        }

        h1 {
            font-size: clamp(2.2rem, 10vw, 3rem);
            color: var(--pink);
            text-shadow: 0 0 20px var(--glow);
            margin-top: 25px;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .message-box {
            text-align: center;
            width: 90%;
            font-size: clamp(0.9rem, 3.8vw, 1.05rem);
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.85);
            font-style: italic;
            margin-bottom: 20px;
        }

        .interaction-zone {
            width: 95%;
            max-width: 400px;
            pointer-events: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .input-bar {
            width: 100%;
            display: flex;
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            padding: 5px 15px;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        input {
            background: transparent;
            border: none;
            color: white;
            flex: 1;
            padding: 12px 5px;
            outline: none;
            font-size: 1rem;
        }

        .send-btn {
            background: transparent;
            border: none;
            color: var(--pink);
            font-weight: bold;
            padding: 0 10px;
            cursor: pointer;
        }

        #responseArea {
            min-height: 50px;
            width: 100%;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .care-msg {
            font-size: 1.2rem;
            font-weight: bold;
            animation: fadeIn 0.5s ease-out;
            text-shadow: 0 0 10px rgba(255, 183, 197, 0.8);
        }

        .player-container {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .vinyl {
            width: 100px; height: 100px;
            background: radial-gradient(circle, #333 0%, #000 75%);
            border-radius: 50%;
            border: 2px solid #222;
            box-shadow: 0 0 25px rgba(255, 133, 162, 0.4);
            position: relative;
            animation: spin 10s linear infinite;
            animation-play-state: paused;
        }

        .vinyl.playing { animation-play-state: running; }

        .music-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--pink);
            color: var(--pink);
            padding: 10px 35px;
            border-radius: 25px;
            cursor: pointer;
            letter-spacing: 1px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        /* YouTube Container - Must be somewhat visible for mobile browsers to allow audio */
        #yt-api-frame { 
            position: fixed; 
            bottom: 10px; 
            left: 10px; 
            width: 60px; 
            height: 60px; 
            z-index: 1;
            opacity: 0.01;
        }

        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<canvas id="magicCanvas"></canvas>
<div id="yt-api-frame"></div>

<div class="scene">
    <h1>Kaisi ho?</h1>
    
    <div class="message-box">
        I always miss you a lot. Each and every breath thinks about you. 
        Your voice echoes in my mind. I really do care about you. 
        I‚Äôm not lying ‚Äî you can trust me.
    </div>

    <div class="interaction-zone">
        <div class="input-bar">
            <input type="text" id="userInput" placeholder="Type anything...">
            <button class="send-btn" onclick="handleMagic()">SEND</button>
        </div>

        <div id="responseArea"></div>

        <div class="player-container">
            <div class="vinyl" id="record"></div>
            <button class="music-btn" onclick="togglePlay()" id="playBtn">START MUSIC</button>
        </div>
    </div>
</div>

<script>
    // 1. YouTube Logic (Updated Video ID)
    let player;
    let musicStarted = false;
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-api-frame', {
            videoId: 'MYWWYJtMsEY', // New Music ID
            playerVars: { 
                'autoplay': 0, 
                'controls': 0, 
                'loop': 1, 
                'playlist': 'MYWWYJtMsEY',
                'playsinline': 1
            }
        });
    }

    function togglePlay() {
        const btn = document.getElementById('playBtn');
        const record = document.getElementById('record');
        
        if (!musicStarted) {
            player.playVideo();
            player.setVolume(100);
            record.classList.add('playing');
            btn.innerText = "PAUSE MUSIC";
            musicStarted = true;
        } else {
            player.pauseVideo();
            record.classList.remove('playing');
            btn.innerText = "START MUSIC";
            musicStarted = false;
        }
    }

    // 2. Realistic Treats & Interaction
    const careMsgs = [
        "soyi thi?", "khana khati ho shi se?", "khush ho?", "tabiyat kaisi hai?",
        "cold se bachati ho khud ko?", "sab thik hai na?", "gandi ladki ho na!",
        "bht jyada miss krta hu tmhe hmesha", "extremely sorry for disturbing you", "gadhi ho na!"
    ];
    
    const treatSymbols = ["üç≤", "üç™", "üå∏", "üçÉ", "‚ù§Ô∏è", "ü´Ç"]; 

    function handleMagic() {
        const input = document.getElementById('userInput');
        if (!input.value.trim()) return;
        input.value = "";

        const area = document.getElementById('responseArea');
        const randomMsg = careMsgs[Math.floor(Math.random() * careMsgs.length)];
        area.innerHTML = `<div class="care-msg" style="color:hsl(${Math.random()*360}, 80%, 80%)">${randomMsg}</div>`;

        // Spawn treats that float ALL THE WAY down
        for(let i=0; i<8; i++) {
            setTimeout(() => {
                const sym = treatSymbols[Math.floor(Math.random() * treatSymbols.length)];
                particles.push(new Treat(sym));
            }, i * 200);
        }
    }

    // 3. Canvas Engine (Background + Physics)
    const canvas = document.getElementById('magicCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    class Star {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 1.5;
            this.speed = Math.random() * 0.3 + 0.1;
        }
        draw() {
            ctx.fillStyle = "rgba(255,255,255,0.4)";
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
            ctx.fill();
            this.y += this.speed;
            if (this.y > canvas.height) this.y = 0;
        }
    }

    class Sparkle {
        constructor(x, y) {
            this.x = x; this.y = y;
            this.size = Math.random() * 3 + 1;
            this.speedX = Math.random() * 2 - 1;
            this.speedY = Math.random() * 2 - 1;
            this.color = `hsl(${Math.random() * 50 + 330}, 100%, 80%)`;
            this.life = 1.0;
        }
        draw() {
            ctx.globalAlpha = this.life;
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
            this.x += this.speedX;
            this.y += this.speedY;
            this.life -= 0.02;
            if (this.life <= 0) this.dead = true;
        }
    }

    class Treat {
        constructor(symbol) {
            this.symbol = symbol;
            this.x = Math.random() * (canvas.width - 60) + 30;
            this.y = -50;
            this.size = Math.random() * 15 + 30;
            this.speedY = Math.random() * 1.5 + 1.5; // Steady fall
            this.rotation = Math.random() * 360;
            this.spin = Math.random() * 2 - 1;
        }
        draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.rotation * Math.PI / 180);
            ctx.globalAlpha = 1.0;
            ctx.font = `${this.size}px serif`;
            ctx.shadowBlur = 15;
            ctx.shadowColor = "rgba(255, 183, 197, 0.6)";
            ctx.fillText(this.symbol, -this.size/2, this.size/2);
            ctx.restore();
            
            this.y += this.speedY; // Falling
            this.rotation += this.spin;
            
            // Fixed deletion: Only remove when it hits the bottom
            if (this.y > canvas.height + 100) this.dead = true;
        }
    }

    // Init
    for(let i=0; i<80; i++) particles.push(new Star());

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => !p.dead);
        particles.forEach(p => p.draw());
        requestAnimationFrame(animate);
    }
    animate();

    // Interaction handlers
    function handleMove(e) {
        const x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
        const y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
        for(let i=0; i<2; i++) particles.push(new Sparkle(x, y));
    }
    window.addEventListener('mousemove', handleMove);
    window.addEventListener('touchmove', handleMove);
    window.addEventListener('mousedown', () => canvas.style.pointerEvents = 'auto');
    window.addEventListener('mouseup', () => canvas.style.pointerEvents = 'none');
</script>

</body>
</html>
