<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Magic For You</title>
    <style>
        :root {
            --pink: #ffb7c5;
            --glow: #ff85a2;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; touch-action: none; }

        body, html {
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: 'serif';
            background: #0b0b18;
            color: white;
        }

        /* The Interactive Background Layer */
        #magicCanvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
        }

        /* Content layer - Floating over the magic */
        .scene {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            padding: 20px;
            pointer-events: none; /* Allows touch to pass through to canvas */
        }

        h1 {
            font-size: clamp(2rem, 10vw, 3.5rem);
            color: var(--pink);
            text-shadow: 0 0 20px var(--glow);
            margin-bottom: 5vh;
            font-weight: 300;
        }

        .message-box {
            text-align: center;
            max-width: 90%;
            font-size: clamp(0.9rem, 3.8vw, 1.1rem);
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
            margin-bottom: 5vh;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8);
        }

        /* Bottom Player Section */
        .player-zone {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            pointer-events: auto; /* Re-enable touch for buttons */
        }

        .vinyl-container {
            width: clamp(100px, 25vh, 160px);
            height: clamp(100px, 25vh, 160px);
            position: relative;
        }

        .vinyl {
            width: 100%; height: 100%;
            background: radial-gradient(circle, #333 0%, #000 70%);
            border-radius: 50%;
            border: 3px solid #222;
            box-shadow: 0 0 30px rgba(0,0,0,1), 0 0 10px var(--glow);
            animation: rotate 10s linear infinite;
            animation-play-state: paused;
        }

        .vinyl.playing { animation-play-state: running; }

        .vinyl::after {
            content: '';
            position: absolute;
            top: 35%; left: 35%; width: 30%; height: 30%;
            background: var(--glow);
            border-radius: 50%;
        }

        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .magic-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--pink);
            color: var(--pink);
            padding: 10px 30px;
            border-radius: 30px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.8rem;
            backdrop-filter: blur(10px);
            cursor: pointer;
        }

        #yt-audio { position: absolute; visibility: hidden; }
    </style>
</head>
<body>

<canvas id="magicCanvas"></canvas>

<div class="scene">
    <h1>Kaisi ho?</h1>
    
    <div class="message-box">
        I always miss you a lot.
        Each and every breath thinks about you.
        My mind and my heart feel you.
        
        Your voice echoes in my mind.
        You come into my dreams — day and night.
        
        I really do care about you.
        I’m not lying — you can trust me.
    </div>

    <div class="player-zone">
        <div class="vinyl-container">
            <div class="vinyl" id="record"></div>
        </div>
        <button class="magic-btn" onclick="toggleMusic()" id="btnText">Start Magic</button>
    </div>
</div>

<div id="yt-audio"></div>

<script>
    // 1. YouTube Audio Control
    let player;
    let isPlaying = false;
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-audio', {
            height: '1', width: '1',
            videoId: 'MYWWYJtMsEY',
            playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': 'MYWWYJtMsEY' }
        });
    }

    function toggleMusic() {
        const record = document.getElementById('record');
        const btn = document.getElementById('btnText');
        if (!isPlaying) {
            player.playVideo();
            record.classList.add('playing');
            btn.innerText = "Pause Magic";
        } else {
            player.pauseVideo();
            record.classList.remove('playing');
            btn.innerText = "Start Magic";
        }
        isPlaying = !isPlaying;
    }

    // 2. High-End Magic Interaction Engine
    const canvas = document.getElementById('magicCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let sparkles = [];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    // Elements: Stars and Drifting Petals
    class Element {
        constructor(type) {
            this.type = type;
            this.reset();
        }
        reset() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = this.type === 'star' ? Math.random() * 2 : Math.random() * 5 + 3;
            this.speedX = (Math.random() - 0.5) * 1;
            this.speedY = Math.random() * 0.5 + 0.2;
            this.opacity = Math.random();
        }
        draw() {
            ctx.globalAlpha = this.opacity;
            ctx.fillStyle = this.type === 'star' ? '#fff' : '#ffb7c5';
            ctx.beginPath();
            if(this.type === 'star') ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
            else ctx.ellipse(this.x, this.y, this.size, this.size*1.5, this.opacity, 0, Math.PI*2);
            ctx.fill();
            
            this.y += this.speedY;
            this.x += this.speedX;
            if(this.y > canvas.height) this.y = -10;
        }
    }

    // Interactive Magic Sparks
    class Spark {
        constructor(x, y) {
            this.x = x; this.y = y;
            this.size = Math.random() * 10 + 5;
            this.life = 1;
            this.color = `hsl(${Math.random() * 50 + 330}, 100%, 80%)`;
        }
        draw() {
            ctx.globalAlpha = this.life;
            ctx.shadowBlur = 15;
            ctx.shadowColor = this.color;
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
            ctx.fill();
            ctx.shadowBlur = 0;
            this.life -= 0.02;
            this.size *= 0.96;
        }
    }

    // Initialize background
    for(let i=0; i<80; i++) particles.push(new Element('star'));
    for(let i=0; i<30; i++) particles.push(new Element('petal'));

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => p.draw());
        sparkles = sparkles.filter(s => s.life > 0);
        sparkles.forEach(s => s.draw());
        requestAnimationFrame(animate);
    }
    animate();

    // Touch Interaction
    function handleMagic(e) {
        let x = e.clientX || e.touches[0].clientX;
        let y = e.clientY || e.touches[0].clientY;
        for(let i=0; i<3; i++) sparkles.push(new Spark(x, y));
    }
    canvas.addEventListener('mousemove', handleMagic);
    canvas.addEventListener('touchmove', handleMagic);
</script>

</body>
</html>
