<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Magic For You</title>
    <style>
        :root {
            --pink: #ffb7c5;
            --glow: #ff85a2;
            --deep: #ff2d75;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; touch-action: none; }

        body, html {
            height: 100%; width: 100%;
            overflow: hidden;
            font-family: 'Georgia', serif;
            background: #05050a;
            color: white;
        }

        #magicCanvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
        }

        .scene {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
            padding: 40px 20px;
            pointer-events: none;
        }

        h1 {
            font-size: clamp(2.2rem, 10vw, 3.5rem);
            color: var(--pink);
            text-shadow: 0 0 20px var(--glow);
            font-weight: 300;
            text-align: center;
        }

        .message-box {
            text-align: center;
            max-width: 90%;
            font-size: clamp(0.9rem, 3.8vw, 1.1rem);
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8);
        }

        /* Interaction Section */
        .interaction-zone {
            width: 90%;
            max-width: 400px;
            pointer-events: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .input-wrap {
            width: 100%;
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 5px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        input {
            background: transparent;
            border: none;
            color: white;
            flex: 1;
            padding: 10px;
            outline: none;
            font-size: 1rem;
        }

        /* Player Zone */
        .player-zone {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .vinyl-container {
            width: clamp(100px, 20vh, 140px);
            height: clamp(100px, 20vh, 140px);
            position: relative;
        }

        .vinyl {
            width: 100%; height: 100%;
            background: radial-gradient(circle, #333 0%, #000 70%);
            border-radius: 50%;
            border: 3px solid #222;
            box-shadow: 0 0 20px var(--deep);
            animation: rotate 8s linear infinite;
            animation-play-state: paused;
        }

        .vinyl.playing { animation-play-state: running; }

        .btn {
            background: transparent;
            border: 1px solid var(--pink);
            color: var(--pink);
            padding: 10px 30px;
            border-radius: 30px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn:active { background: var(--pink); color: #000; }

        /* Magic Response Text Animation */
        #responseOverlay {
            position: fixed;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            pointer-events: none;
            text-align: center;
            width: 100%;
        }

        .pop-text {
            font-size: 1.5rem;
            color: white;
            text-shadow: 0 0 20px var(--deep);
            animation: popOut 3s forwards ease-out;
            padding: 20px;
        }

        @keyframes popOut {
            0% { transform: scale(0.5); opacity: 0; }
            20% { transform: scale(1.1); opacity: 1; }
            80% { transform: scale(1); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        #yt-audio { position: absolute; visibility: hidden; }
    </style>
</head>
<body>

<canvas id="magicCanvas"></canvas>
<div id="responseOverlay"></div>

<div class="scene">
    <h1>Kaisi ho?</h1>
    
    <div class="message-box">
        I always miss you a lot.
        Each and every breath thinks about you.
        My mind and my heart feel you.
        Your voice echoes in my mind.
        I really do care about you.
        I’m not lying — you can trust me.
    </div>

    <div class="interaction-zone">
        <div class="input-wrap">
            <input type="text" id="userIn" placeholder="Type anything...">
            <button class="btn" style="border:none; padding: 0 10px;" onclick="showMagicText()">Send</button>
        </div>

        <div class="player-zone">
            <div class="vinyl-container">
                <div class="vinyl" id="record"></div>
            </div>
            <button class="btn" onclick="toggleMusic()" id="btnText">Start</button>
        </div>
    </div>
</div>

<div id="yt-audio"></div>

<script>
    // 1. YouTube Control
    let player;
    let isPlaying = false;
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-audio', {
            height: '1', width: '1',
            videoId: 'P4ofSL-n3s0',
            playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': 'P4ofSL-n3s0' }
        });
    }

    function toggleMusic() {
        const record = document.getElementById('record');
        const btn = document.getElementById('btnText');
        if (!isPlaying) {
            player.playVideo();
            record.classList.add('playing');
            btn.innerText = "Pause";
        } else {
            player.pauseVideo();
            record.classList.remove('playing');
            btn.innerText = "Start";
        }
        isPlaying = !isPlaying;
    }

    // 2. Magic Text Feature
    const yourMessages = [
        "soyi thi?",
        "khana khati ho shi se?",
        "khush ho?",
        "tabiyat kaisi hai?",
        "cold se bachati ho khud ko?",
        "sab thik hai na?",
        "gandi ladki ho na!",
        "bht jyada miss krta hu tmhe hmesha",
        "mjhe pta hai mai tmhe preshan kr rha, extremely sorry",
        "gadhi ho na!"
    ];

    function showMagicText() {
        const input = document.getElementById('userIn');
        if (!input.value.trim()) return;
        
        input.value = ""; // Clear input
        const overlay = document.getElementById('responseOverlay');
        const randomMsg = yourMessages[Math.floor(Math.random() * yourMessages.length)];
        
        const el = document.createElement('div');
        el.className = 'pop-text';
        el.innerText = randomMsg;
        
        overlay.innerHTML = ''; // Clear previous
        overlay.appendChild(el);
        
        setTimeout(() => el.remove(), 3000);
    }

    // 3. Background Interaction Engine
    const canvas = document.getElementById('magicCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let sparkles = [];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    class Element {
        constructor(type) {
            this.type = type;
            this.reset();
        }
        reset() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = this.type === 'star' ? Math.random() * 2 : Math.random() * 5 + 2;
            this.speedY = Math.random() * 0.4 + 0.1;
            this.opacity = Math.random();
        }
        draw() {
            ctx.globalAlpha = this.opacity;
            ctx.fillStyle = this.type === 'star' ? '#fff' : '#ffb7c5';
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
            ctx.fill();
            this.y += this.speedY;
            if(this.y > canvas.height) this.y = -10;
        }
    }

    class Spark {
        constructor(x, y) {
            this.x = x; this.y = y;
            this.size = Math.random() * 8 + 2;
            this.life = 1;
        }
        draw() {
            ctx.globalAlpha = this.life;
            ctx.fillStyle = '#ff85a2';
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
            ctx.fill();
            this.life -= 0.03;
        }
    }

    for(let i=0; i<70; i++) particles.push(new Element('star'));
    for(let i=0; i<20; i++) particles.push(new Element('petal'));

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => p.draw());
        sparkles = sparkles.filter(s => s.life > 0);
        sparkles.forEach(s => s.draw());
        requestAnimationFrame(animate);
    }
    animate();

    function handleMagic(e) {
        let x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
        let y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
        sparkles.push(new Spark(x, y));
    }
    window.addEventListener('mousemove', handleMagic);
    window.addEventListener('touchmove', handleMagic);
</script>
</body>
</html>
