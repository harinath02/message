<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Magic For You</title>
    <style>
        :root {
            --pink: #ffb7c5;
            --glow: #ff85a2;
            --deep: #ff2d75;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; touch-action: none; }

        body, html {
            height: 100%; width: 100%;
            overflow: hidden;
            font-family: 'Georgia', serif;
            background: #05050a;
            color: white;
        }

        #magicCanvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
        }

        .scene {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            z-index: 10;
            padding: 20px;
            pointer-events: none;
        }

        h1 {
            font-size: clamp(2.2rem, 10vw, 3rem);
            color: var(--pink);
            text-shadow: 0 0 20px var(--glow);
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 300;
        }

        .message-box {
            text-align: center;
            width: 90%;
            font-size: clamp(0.9rem, 3.8vw, 1.05rem);
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.85);
            font-style: italic;
            margin-bottom: 25px;
        }

        .interaction-zone {
            width: 95%;
            max-width: 400px;
            pointer-events: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .input-bar {
            width: 100%;
            display: flex;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            padding: 5px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        input {
            background: transparent;
            border: none;
            color: white;
            flex: 1;
            padding: 12px 5px;
            outline: none;
            font-size: 1rem;
        }

        .send-btn {
            background: transparent;
            border: none;
            color: var(--pink);
            font-weight: bold;
            padding: 0 10px;
            cursor: pointer;
        }

        #responseArea {
            min-height: 50px;
            text-align: center;
        }

        .player-container {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .vinyl {
            width: 100px; height: 100px;
            background: radial-gradient(circle, #333 0%, #000 75%);
            border-radius: 50%;
            border: 2px solid #222;
            box-shadow: 0 0 20px var(--deep);
            animation: spin 10s linear infinite;
            animation-play-state: paused;
        }

        .vinyl.playing { animation-play-state: running; }

        .music-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--pink);
            color: var(--pink);
            padding: 10px 30px;
            border-radius: 20px;
            cursor: pointer;
            text-transform: uppercase;
        }

        #yt-player { position: absolute; top: -1000px; }

        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<canvas id="magicCanvas"></canvas>
<div id="yt-player"></div>

<div class="scene">
    <h1>Kaisi ho?</h1>
    
    <div class="message-box">
        I always miss you a lot. Each and every breath thinks about you. My mind and my heart feel you. Your voice echoes in my mind. I really do care about you. I‚Äôm not lying ‚Äî you can trust me.
    </div>

    <div class="interaction-zone">
        <div class="input-bar">
            <input type="text" id="userInput" placeholder="Type anything...">
            <button class="send-btn" onclick="handleSend()">SEND</button>
        </div>

        <div id="responseArea"></div>

        <div class="player-container">
            <div class="vinyl" id="record"></div>
            <button class="music-btn" onclick="togglePlay()" id="playBtn">Start Music</button>
        </div>
    </div>
</div>

<script>
    // 1. YouTube Audio Fix
    let player;
    let isPlaying = false;
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-player', {
            height: '1', width: '1',
            videoId: 'P4ofSL-n3s0',
            playerVars: { 'autoplay': 0, 'controls': 0, 'playsinline': 1, 'playlist': 'P4ofSL-n3s0', 'loop': 1 },
            events: { 'onStateChange': onPlayerStateChange }
        });
    }

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.ENDED) { player.playVideo(); }
    }

    function togglePlay() {
        const record = document.getElementById('record');
        const btn = document.getElementById('playBtn');
        if (!isPlaying) {
            player.playVideo();
            record.classList.add('playing');
            btn.innerText = "Pause Music";
        } else {
            player.pauseVideo();
            record.classList.remove('playing');
            btn.innerText = "Start Music";
        }
        isPlaying = !isPlaying;
    }

    // 2. Interaction & Treats
    const careMsgs = ["soyi thi?", "khana khati ho shi se?", "khush ho?", "tabiyat kaisi hai?", "cold se bachati ho khud ko?", "sab thik hai na?", "gandi ladki ho na!", "bht jyada miss krta hu tmhe hmesha", "extremely sorry for disturbing you", "gadhi ho na!"];
    const treats = ["ü•ò", "üç¨", "üå∏", "üçÉ"]; // Gol Gappe, Sweet, Gajra, Paan

    function handleSend() {
        const input = document.getElementById('userInput');
        if (!input.value.trim()) return;
        input.value = "";
        const area = document.getElementById('responseArea');
        const msg = careMsgs[Math.floor(Math.random() * careMsgs.length)];
        area.innerHTML = `<div style="color:var(--pink); font-weight:bold; font-size:1.2rem; animation:fadeIn 0.5s;">${msg}</div>`;
        
        for(let i=0; i<6; i++) {
            setTimeout(() => particles.push(new Treat(treats[Math.floor(Math.random()*treats.length)])), i * 100);
        }
    }

    // 3. Canvas Engine: Stars + Magic Finger Trail
    const canvas = document.getElementById('magicCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let mouse = { x: -100, y: -100 };

    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.addEventListener('resize', resize);
    resize();

    class Star {
        constructor() { this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height; this.size = Math.random() * 1.5; this.speed = Math.random() * 0.2 + 0.1; }
        draw() { ctx.fillStyle = "white"; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill(); this.y += this.speed; if(this.y > canvas.height) this.y = 0; }
    }

    class Sparkle {
        constructor(x, y) { this.x = x; this.y = y; this.size = Math.random() * 4 + 2; this.life = 1; this.vx = (Math.random()-0.5)*2; this.vy = (Math.random()-0.5)*2; }
        draw() { ctx.globalAlpha = this.life; ctx.fillStyle = var(--glow); ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill(); this.life -= 0.02; this.x += this.vx; this.y += this.vy; }
    }

    class Treat {
        constructor(symbol) { this.symbol = symbol; this.x = Math.random() * canvas.width; this.y = -50; this.size = 30; this.speed = Math.random() * 2 + 2; this.rot = 0; }
        draw() { ctx.save(); ctx.translate(this.x, this.y); ctx.rotate(this.rot); ctx.font = "30px serif"; ctx.fillText(this.symbol, 0, 0); ctx.restore(); this.y += this.speed; this.rot += 0.05; if(this.y > canvas.height + 50) this.dead = true; }
    }

    for(let i=0; i<80; i++) particles.push(new Star());

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => !p.dead && (p.life === undefined || p.life > 0));
        particles.forEach(p => p.draw());
        requestAnimationFrame(animate);
    }
    animate();

    const handleMove = (e) => {
        const x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
        const y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
        for(let i=0; i<2; i++) particles.push(new Sparkle(x, y));
    };
    window.addEventListener('mousemove', handleMove);
    window.addEventListener('touchmove', handleMove);
</script>
<style> @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } </style>
</body>
</html>
